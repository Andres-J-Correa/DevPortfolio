"use strict";(self.webpackChunkcode_portfolio=self.webpackChunkcode_portfolio||[]).push([[528],{528:(e,t,r)=>{r.r(t),r.d(t,{default:()=>u});var n=r(43),s=r(216),a=r(213),i=r(716),o=r.n(i);const c="".concat("https://devportfolio20240614070249.azurewebsites.net/api"),l={headers:{"content-type":"application/json"},crossDomain:!0};r(220);var d=r(579);const u=()=>{const[e,t]=(0,n.useState)([]),[r,i]=(0,n.useState)(""),[u,v]=(0,n.useState)([]),[w,h]=(0,n.useState)(null),[g,f]=(0,n.useState)([]),[m,_]=(0,n.useState)(!1),[x,p]=(0,n.useState)(!1),[y,b]=(0,n.useState)(null),{state:j}=(0,s.zy)(),E=(0,n.useMemo)((()=>g.length>0&&0===u.length&&!w),[u,w,g]),N=(0,n.useRef)(null),k=(0,n.useCallback)((()=>{_(!0);let e=g.reduce(((e,t)=>e+t.grade),0);e/=g.length,setTimeout((()=>{t((t=>[...t,{sender:"ai",text:"Your final grade is: ".concat(e)}])),_(!1),p(!0)}),1e3)}),[g]),S=async e=>{try{var r;_(!0);const n={question:w.question,answer:e},s=await(async e=>{const t={method:"POST",data:e,url:"".concat(c,"/InterviewGrading/create"),...l};try{const e=(0,a.A)(t);if(!e)throw new Error("No response from requestInterviewGrading");return e}catch(r){Promise.reject(r)}})(n);if(null===s||void 0===s||!s.data)throw new Error("Error sending grading request");const i=await(async e=>{let t,r=0,n=Math.floor(3);const s={method:"GET",url:"".concat(c,"/InterviewGrading/").concat(e),...l},i=async(e,i)=>{let c;r++;try{r%3===0&&o().info("Still working on this for you..."),c=await(0,a.A)(s),clearInterval(t),e(c)}catch(l){(r>=n||404!==l.response.status)&&(clearInterval(t),i(l))}};return new Promise(((e,r)=>{t=setInterval(i,1e3,e,r)}))})(s.data);if(null===i||void 0===i||null===(r=i.data)||void 0===r||!r.gradingResult)throw new Error("Error getting grading results");f((e=>[...e,i.data.gradingResult])),t((e=>[...e,{sender:"ai",text:"".concat(i.data.gradingResult.feedback)}])),_(!1),(()=>{if(u.length){const e=u.pop();_(!0),setTimeout((()=>{t((t=>[...t,{sender:"ai",text:"Next question: ".concat(e.question)}])),h(e),_(!1)}),1e3)}else h(null)})()}catch(n){t((e=>[...e,{sender:"ai",text:"I had difficulties analyzing your response, please re-send it."}])),o().error("Error sending answer. ".concat(n.message)),_(!1)}},q=n=>{var s,a;if(n.shiftKey&&"Enter"===n.key){n.preventDefault();var o=n.target.selectionStart,c=n.target.selectionEnd,l=n.target.value;n.target.value=l.substring(0,o)+"\n"+l.substring(c),n.target.selectionStart=n.target.selectionEnd=o+1}if("Enter"===n.key&&!n.shiftKey||"1"===(null===(s=n.currentTarget)||void 0===s||null===(a=s.dataset)||void 0===a?void 0:a.send)){n.preventDefault();const s=r.trim();s.replace(/(\r\n|\n|\r)+/gm,"").trim().length>0&&(t([...e,{sender:"user",text:s}]),S(s),i(""))}},I=(0,n.useCallback)((e=>{_(!0),setTimeout((()=>{t((e=>[...e,{sender:"ai",text:"Welcome to the ".concat(y.text," interview. During this session, I will ask you five technical questions. Please respond to each question to the best of your ability. At the end of the interview, I will provide you with your final grade. Let's get started with the first question:")}]))}),1e3),setTimeout((()=>{t((t=>[...t,{sender:"ai",text:"".concat(e.question)}])),h(e),_(!1)}),2e3)}),[y]),T=(0,n.useCallback)((async()=>{try{if(null!==y&&void 0!==y&&y.id){const e=await(async e=>{const t={method:"GET",url:"".concat(c,"/InterviewQuestions/").concat(e),...l};try{const e=(0,a.A)(t);if(!e)throw new Error("No response from requestInterviewGrading");return e}catch(r){Promise.reject(r)}})(y.id),t=e.data,r=t.pop();I(r),v(t)}}catch(e){o().error("Error fetching interview questions: ".concat(e.message))}}),[y,I]);return(0,n.useEffect)((()=>{T()}),[T]),(0,n.useEffect)((()=>{b({...j})}),[j]),(0,n.useEffect)((()=>{E&&k()}),[k,E]),(0,n.useEffect)((()=>{N.current&&(N.current.scrollTop=N.current.scrollHeight)}),[e]),(0,d.jsxs)("div",{className:"new-interview__root",children:[(0,d.jsxs)("h1",{className:"new-interview__header",children:[null===y||void 0===y?void 0:y.text," Interview"]}),(0,d.jsxs)("div",{className:"new-interview__chatbox-container",children:[" ",(0,d.jsxs)("div",{className:"new-interview__chatbox",ref:N,children:[e.map(((e,t)=>(0,d.jsx)("div",{className:"new-interview__message new-interview__message--".concat(e.sender),children:(0,d.jsx)("div",{className:"new-interview__message-box new-interview__message-box--".concat(e.sender),children:e.text})},t))),m&&(0,d.jsx)("div",{className:"react-interview__message react-interview__message--ai",children:(0,d.jsx)("div",{className:"react-interview__loader",children:(0,d.jsxs)("div",{className:"react-interview__loader-dots",children:[(0,d.jsx)("div",{className:"react-interview__loader-dot"}),(0,d.jsx)("div",{className:"react-interview__loader-dot"}),(0,d.jsx)("div",{className:"react-interview__loader-dot"})]})})})]}),(0,d.jsxs)("div",{className:"new-interview__input",children:[(0,d.jsx)("textarea",{value:r,onChange:e=>{i(e.target.value)},onKeyDown:q,rows:"3",placeholder:"Type your answer...",disabled:m||x,autoCorrect:"on"}),(0,d.jsx)("button",{onClick:q,"data-send":"1",disabled:m||x,children:"Send"})]})]})]})}},220:()=>{}}]);
//# sourceMappingURL=528.635ccecc.chunk.js.map